<div class="p-4">
  <sc-title [title]="'Reports'"></sc-title>
</div>

<div class="ms-5 me-5">
  <div class="report-controls ms-5 p-5 border border-secondary border-opacity-25">
    <div class="d-flex justify-content-between align-items-end ps-5 pe-5">
      <!-- Select Report -->
      <div class="flex-fill me-3">
        <dx-select-box
          [dataSource]="reportOptions"
          displayExpr="name"
          valueExpr="value"
          [(value)]="formData.selectedReport"
          placeholder="Select Report"
          labelMode="floating"
          stylingMode="outlined"
        ></dx-select-box>
      </div>

      <!-- Select Chart Type -->
      <div class="flex-fill me-3">
        <dx-select-box
          [dataSource]="chartTypes"
          [(value)]="formData.selectedChartType"
          placeholder="Select Chart Type"
          labelMode="floating"
          stylingMode="outlined"
        ></dx-select-box>
      </div>

      <!-- Run Report Button -->
      <div class="">
        <dx-button
          text="Run Report"
          type="success"
          stylingMode="contained"
          (onClick)="runReport()"
          width="100%"
        ></dx-button>
      </div>
    </div>
  </div>

  <!-- Chart Rendering -->
  <div *ngIf="reportData" class="ms-5 me-5 mt-4">
    <ng-container [ngSwitch]="selectedChartType">
      <sc-bar-chart
        *ngSwitchCase="'bar'"
        [reportData]="reportData"
        [seriesFields]="seriesFields"
      ></sc-bar-chart>
      <sc-pie-chart
        *ngSwitchCase="'pie'"
        [reportData]="reportData"
        [seriesFields]="seriesFields"
      ></sc-pie-chart>
      <sc-funnel-pyramid-chart
        *ngSwitchCase="'funnel'"
        [reportData]="reportData"
        [seriesFields]="seriesFields"
      ></sc-funnel-pyramid-chart>
      <sc-sparkline-chart
        *ngSwitchCase="'sparkline'"
        [reportData]="reportData"
        [seriesFields]="seriesFields"
      ></sc-sparkline-chart>
      <sc-doughnut-chart
        *ngSwitchCase="'doughnut'"
        [reportData]="reportData"
        [seriesFields]="seriesFields"
      ></sc-doughnut-chart>
    </ng-container>
  </div>

  <!-- Report Grid -->
  <div *ngIf="reportData" class="ms-5 me-5 mt-5 pt-5 mb-5">
    <sc-report-grid [reportData]="reportData"></sc-report-grid>
  </div>
</div>
