<div class="p-4">
  <sc-title [title]="'Reports'"></sc-title>
</div>

<div class="ms-5 me-5 d-flex flex-column">
    <div class="report-controls d-flex  gap-5 ms-5 p-5 border border-secondary border-opacity-25 ">
      <div class="flex-grow-1 flex-fill d-flex">
        <dx-form [formData]="formData">
        <dxi-item [cssClass]="'flex-grow-1 flex-fill'" itemType="group" [colCount]="3">
          <dxi-item [cssClass]="'flex-grow-1 flex-fill'" dataField="selectedReport" [editorType]="'dxSelectBox'"
                    [editorOptions]="{dataSource: reportOptions, displayExpr: 'name', valueExpr: 'value'}" [colSpan]="1">
            <dxo-label text="Select Report"></dxo-label>
          </dxi-item>

          <dxi-item [cssClass]="'flex-grow-1 flex-fill'" dataField="selectedChartType" [editorType]="'dxSelectBox'"
                    [editorOptions]="{dataSource: chartTypes}" [colSpan]="1">
            <dxo-label text="Select Chart Type"></dxo-label>
          </dxi-item>

          <dxi-item [cssClass]="'flex-grow-1 flex-fill'" itemType="button" [buttonOptions]="runButtonOptions" [colSpan]="1">
            <dxo-label text="Run Report"></dxo-label>
          </dxi-item>
        </dxi-item>
      </dx-form>
      </div>
    </div>
    <div *ngIf="reportData" class="ms-5 me-5 mt-4">
      @switch (selectedChartType) {
        @case ("bar") {
         <sc-bar-chart [reportData]="reportData" [seriesFields]="seriesFields" ></sc-bar-chart>
        }
        @case ("pie") {
         <sc-pie-chart [reportData]="reportData" [seriesFields]="seriesFields" ></sc-pie-chart>
        }
        @case ("funnel") {
         <sc-funnel-pyramid-chart [reportData]="reportData" [seriesFields]="seriesFields" ></sc-funnel-pyramid-chart>
        }
        @case ("sparkline") {
         <sc-sparkline-chart [reportData]="reportData" [seriesFields]="seriesFields" ></sc-sparkline-chart>
        }
        @case ("doughnut") {
          <sc-doughnut-chart [reportData]="reportData" [seriesFields]="seriesFields" ></sc-doughnut-chart>
        }
      }
    </div>
    <div *ngIf="reportData" class="ms-5 me-5 mt-5 pt-5 mb-5">
       <sc-report-grid
          [reportData]="reportData"
           >
       </sc-report-grid>
    </div>
</div>
